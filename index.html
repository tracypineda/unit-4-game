<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <title>Crystal Game</title>
</head>

<body class="container">
    <div class="row">
        <div class=col-md-12>
            <h1> Crystal Collector! </h1>
        </div>
    </div>
    <div class="row">
        <div class="col-md-8">
            <p> You will be given a random number at the start of the game.

                There are four (4) crystals below.

                By clicking on each crystal you will add a specific amount of points to you total score.


                You win the game by matching your total score with the random number, you loose the game if your total
                score goes over the value of the random number.


                The value of the crystal is hidden from you until click on it.


                Each time the game starts the value of the crystals will change.
            </p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8">
            <h2> Number to Guess: <span id="random-number"></span></h2>
        </div>
        <div class="col-md-4">
            <h3> Wins: <span id="wins"></span></h3>
            <h3> Losses: <span id="losses"></span></h3>
        </div>
    </div>
    </div>

    <div class="crystal-buttons">
        <button type="button" class="btn btn-1"><img class="crystal" src="assets/images/crystal1.png"
                value="data-value"></button>
        <button type="button" class="btn btn-2"><img class="crystal" src="assets/images/crystal2.png"
                value="data-value"></button>
        <button type="button" class="btn btn-3"><img class="crystal" src="assets/images/crystal3.jpg"
                value="data-value"></button>
        <button type="button" class="btn btn-4"><img class="crystal" src="assets/images/crystal4.jpg"
                value="data-value"></button>
    </div>

    <h2> Your Total Score: <span id="user-guesses"></span></h2>
    <h2> <span id="score-board"></span></h2>
    <script>
        // global variables
        var wins = 0;
        var losses = 0;
        var runningTotal = 0;
        var roundTargetScore = Math.floor(Math.random() * 120 + 19);
        var randomCrystalValue = Math.floor(Math.random() * 12 + 1);

        $("#wins").text(wins);
        $("#losses").text(losses);
        $("#random-number").text(roundTargetScore);
        $(".btn btn-1").text(randomCrystalValue);
        $(".btn btn-2").text(randomCrystalValue);
        $(".btn btn-3").text(randomCrystalValue);
        $(".btn btn-4").text(randomCrystalValue);
        $("#score-board").text(runningTotal);

        // Functions
        function gamereset() {
        roundTargetScore = Math.floor(Math.random() * 120 + 19);
        randomCrystalValue = Math.floor(Math.random() * 12 + 1);
        $("#random-number").text(roundTargetScore)
        runningTotal = 0;
        }

        function startGame () {
            genDataValue();
            $(".crystal").on("click", function () {
                $(this).attr("data-value");
                console.log($(this).val());
                // console.log ($(this).attr("value"));
                runningTotal += $(this).attr("data-value");
                didWeWin();
            })
        }

        function genDataValue() {
            $(".crystal").attr("data-value", randomCrystalValue);

        }
        function didWeWin() {
            if (runningTotal === roundTargetScore) {
                wins++;
                alert("Yay, You won!");
                $("#wins").text(wins);
                gamereset();
            } else if (runningTotal > roundTargetScore);
                losses++;
                $("#losses").text(losses);
                alert("booooooo");
                gamereset();
            }

    </script>
</body>

</html>